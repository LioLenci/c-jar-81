<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@500&display=swap" rel="stylesheet">
  <title>Jar of Positivity</title>

  <style>
    :root {
      --bg: #f6f1ec;
      --ink: #2f2f2f;
      --muted: #7a7a7a;
      --glass: rgba(120, 165, 175, 0.18);
      --stroke: rgba(60, 80, 85, 0.55);
      --btnStroke: rgba(0, 0, 0, 0.12);
      --shadow: 0 14px 30px rgba(0, 0, 0, 0.08);

      --sage: #9fb8a0;
      --sageDark: #86a689;
      --sageLight: #b8cfb7;
    }

    html,
    body {
      height: 100%
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color: var(--ink);
      background: radial-gradient(1200px 700px at 50% 10%, #fbf8f5, var(--bg));
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .wrap {
      width: min(880px, 92vw);
      text-align: center;
      padding: 34px 10px 48px;
    }

    .hello {
      display: flex;
      justify-content: center;
      margin-bottom: 10px;
      user-select: none;
    }

    .hello svg {
      width: min(520px, 92vw);
      height: auto;
    }

    .helloText {
      font-family: "Dancing Script", "Bradley Hand", "Segoe Print", "Apple Chancery", cursive;
      font-size: 110px;
      fill: rgba(55, 55, 55, 0.72);
    }

    .sub {
      margin: 6px 0 26px;
      color: var(--muted);
      letter-spacing: 0.08em;
      font-size: 13px;
      text-transform: uppercase;
    }

    .stage {
      display: grid;
      place-items: center;
      gap: 14px;
      margin-top: 10px;
    }

    .jarArea {
      position: relative;
      width: min(340px, 80vw);
      aspect-ratio: 1/1.08;
      display: grid;
      place-items: center;
      cursor: pointer;
      outline: none;
    }

    .jarArea:focus-visible {
      box-shadow: 0 0 0 4px rgba(120, 165, 175, 0.28);
      border-radius: 18px;
    }

    /* Jar SVG stays below the pulled note */
    .jar {
      position: relative;
      z-index: 1;
      width: 100%;
      filter: drop-shadow(0px 18px 18px rgba(0, 0, 0, 0.08));
      transform-origin: 50% 78%;
    }

    /* Pulled note always above jar/bow */
    .note {
      z-index: 10;
      position: absolute;
      left: 50%;
      top: 14%;
      transform: translate(-50%, -10px) rotate(-2deg);
      width: min(250px, 78%);
      background: #fffdf8;
      border: 1px solid rgba(0, 0, 0, 0.08);
      border-radius: 14px;
      box-shadow: var(--shadow);
      padding: 16px 16px 14px;
      opacity: 0;
      pointer-events: none;
    }

    .note .msg {
      font-family: ui-rounded, "Bradley Hand", "Comic Sans MS", "Segoe Print", "Apple Chancery", cursive;
      font-size: 22px;
      line-height: 1.15;
      color: rgba(40, 40, 40, 0.88);
      margin: 0;
    }

    .note .tiny {
      margin-top: 10px;
      font-size: 12px;
      color: rgba(0, 0, 0, 0.35);
      letter-spacing: 0.06em;
      text-transform: uppercase;
    }

    .lid {
      transform-origin: 50% 18%;
      transition: transform 520ms cubic-bezier(.2, .9, .2, 1);
    }

    .shake {
      animation: shake 520ms ease-in-out;
    }

    @keyframes shake {
      0% {
        transform: rotate(0deg)
      }

      20% {
        transform: rotate(-3deg)
      }

      45% {
        transform: rotate(3.5deg)
      }

      70% {
        transform: rotate(-2.5deg)
      }

      100% {
        transform: rotate(0deg)
      }
    }

    .dropIn {
      animation: dropIn 760ms cubic-bezier(.18, .95, .18, 1) forwards;
    }

    @keyframes dropIn {
      0% {
        opacity: 0;
        transform: translate(-50%, -30px) rotate(-3deg) scale(0.98);
      }

      55% {
        opacity: 1;
        transform: translate(-50%, 140px) rotate(2deg) scale(1.01);
      }

      100% {
        opacity: 1;
        transform: translate(-50%, 170px) rotate(1deg) scale(1);
      }
    }

    .hint {
      color: rgba(0, 0, 0, 0.48);
      font-size: 14px;
      margin-top: 2px;
    }

    .controls {
      display: flex;
      gap: 10px;
      justify-content: center;
      margin-top: 8px;
    }

    button {
      appearance: none;
      border: 1px solid var(--btnStroke);
      background: rgba(255, 255, 255, 0.86);
      backdrop-filter: blur(6px);
      color: rgba(20, 20, 20, 0.78);
      padding: 12px 16px;
      border-radius: 999px;
      font-size: 14px;
      letter-spacing: 0.01em;
      cursor: pointer;
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.06);
      transition: transform 120ms ease, box-shadow 120ms ease;
    }

    button:hover {
      box-shadow: 0 14px 26px rgba(0, 0, 0, 0.08);
    }

    button:active {
      transform: translateY(1px);
    }

    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border: 0;
    }

    @media (prefers-reduced-motion: reduce) {
      .shake {
        animation: none;
      }

      .dropIn {
        animation: none;
        opacity: 1;
        transform: translate(-50%, 170px) rotate(1deg) scale(1);
      }

      .lid {
        transition: none;
      }
    }
  </style>
</head>

<body>
  <main class="wrap">
    <div class="hello" aria-label="Hi, Charley">
      <svg viewBox="0 0 900 220" role="img" aria-label="Hi, Charley">
        <defs>
          <mask id="revealMask">
            <rect x="0" y="0" width="0" height="220" fill="#fff">
              <animate attributeName="width" from="0" to="900" dur="1.8s" fill="freeze" />
            </rect>
          </mask>
        </defs>
        <text x="50%" y="58%" text-anchor="middle" dominant-baseline="middle" mask="url(#revealMask)" class="helloText">
          Hi, Charley
        </text>
      </svg>
    </div>

    <div class="sub">Jar of positivity</div>

    <section class="stage">
      <div class="jarArea" id="jarArea" tabindex="0" role="button" aria-label="Tap the jar to get a positive note">
        <div class="note" id="note" aria-live="polite">
          <p class="msg" id="msg">You’ve got this.</p>
          <div class="tiny">a little note</div>
        </div>

        <svg class="jar" id="jarSvg" viewBox="0 0 300 330" aria-hidden="true">
          <defs>
            <clipPath id="jarClip">
              <path d="M95 70
                       C95 62, 105 58, 115 58
                       L185 58
                       C195 58, 205 62, 205 70
                       L205 92
                       C205 100, 212 108, 220 118
                       C232 134, 238 158, 238 190
                       L238 248
                       C238 292, 210 312, 150 312
                       C90 312, 62 292, 62 248
                       L62 190
                       C62 158, 68 134, 80 118
                       C88 108, 95 100, 95 92
                       Z" />
            </clipPath>

            <!-- subtle shading for a more realistic ribbon -->
            <linearGradient id="ribbonGrad" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="var(--sageLight)" stop-opacity="0.95" />
              <stop offset="0.45" stop-color="var(--sage)" stop-opacity="0.98" />
              <stop offset="1" stop-color="var(--sageDark)" stop-opacity="0.98" />
            </linearGradient>

            <filter id="bowShadow" x="-20%" y="-20%" width="140%" height="140%">
              <feDropShadow dx="0" dy="2" stdDeviation="2" flood-color="rgba(0,0,0,0.18)" />
            </filter>

            <!-- feather the "cover band" so the outline interruption isn't harsh -->
            <filter id="softCover" x="-30%" y="-30%" width="160%" height="160%">
              <feGaussianBlur stdDeviation="1.4" />
            </filter>
          </defs>

          <!-- Lid -->
          <g class="lid" id="lid">
            <rect x="70" y="32" width="160" height="44" rx="14" fill="rgba(120,120,120,0.20)"
              stroke="rgba(60,60,60,0.18)" />
            <rect x="82" y="38" width="136" height="10" rx="5" fill="rgba(255,255,255,0.35)" />
          </g>

          <!-- Jar body (fill) -->
          <path d="M95 70
                   C95 62, 105 58, 115 58
                   L185 58
                   C195 58, 205 62, 205 70
                   L205 92
                   C205 100, 212 108, 220 118
                   C232 134, 238 158, 238 190
                   L238 248
                   C238 292, 210 312, 150 312
                   C90 312, 62 292, 62 248
                   L62 190
                   C62 158, 68 134, 80 118
                   C88 108, 95 100, 95 92
                   Z" fill="var(--glass)" />

          <!-- Notes inside jar (clipped) -->
          <g clip-path="url(#jarClip)" opacity="0.94">
            <rect x="72" y="246" width="98" height="54" rx="8" fill="#fffdf8" stroke="rgba(0,0,0,0.05)"
              transform="rotate(6 72 246)" />
            <rect x="150" y="248" width="96" height="52" rx="8" fill="#fffdf8" stroke="rgba(0,0,0,0.05)"
              transform="rotate(-5 150 248)" />
            <rect x="98" y="236" width="110" height="56" rx="8" fill="#fffdf8" stroke="rgba(0,0,0,0.05)"
              transform="rotate(1 98 236)" />

            <rect x="78" y="214" width="104" height="54" rx="8" fill="#fffdf8" stroke="rgba(0,0,0,0.05)"
              transform="rotate(-7 78 214)" />
            <rect x="150" y="214" width="104" height="54" rx="8" fill="#fffdf8" stroke="rgba(0,0,0,0.05)"
              transform="rotate(6 150 214)" />
            <rect x="104" y="202" width="112" height="56" rx="8" fill="#fffdf8" stroke="rgba(0,0,0,0.05)"
              transform="rotate(2 104 202)" />

            <rect x="80" y="182" width="98" height="52" rx="8" fill="#fffdf8" stroke="rgba(0,0,0,0.05)"
              transform="rotate(7 80 182)" />
            <rect x="150" y="182" width="100" height="52" rx="8" fill="#fffdf8" stroke="rgba(0,0,0,0.05)"
              transform="rotate(-6 150 182)" />
            <rect x="102" y="170" width="108" height="54" rx="8" fill="#fffdf8" stroke="rgba(0,0,0,0.05)"
              transform="rotate(1 102 170)" />

            <rect x="92" y="140" width="86" height="46" rx="8" fill="#fffdf8" stroke="rgba(0,0,0,0.05)"
              transform="rotate(-8 92 140)" />
            <rect x="142" y="138" width="92" height="48" rx="8" fill="#fffdf8" stroke="rgba(0,0,0,0.05)"
              transform="rotate(7 142 138)" />

            <rect x="88" y="160" width="56" height="26" rx="6" fill="#fffdf8" opacity="0.85" />
            <rect x="170" y="168" width="58" height="26" rx="6" fill="#fffdf8" opacity="0.82" />
            <rect x="118" y="154" width="62" height="28" rx="6" fill="#fffdf8" opacity="0.80" />
          </g>

          <!-- Inner highlights (glass) -->
          <path d="M92 130 C84 154, 84 230, 92 268" fill="none" stroke="rgba(255,255,255,0.65)" stroke-width="6"
            stroke-linecap="round" opacity="0.55" />
          <path d="M206 128 C214 160, 214 230, 206 266" fill="none" stroke="rgba(255,255,255,0.45)" stroke-width="4"
            stroke-linecap="round" opacity="0.38" />

          <!-- Jar outline -->
          <path d="M95 70
                   C95 62, 105 58, 115 58
                   L185 58
                   C195 58, 205 62, 205 70
                   L205 92
                   C205 100, 212 108, 220 118
                   C232 134, 238 158, 238 190
                   L238 248
                   C238 292, 210 312, 150 312
                   C90 312, 62 292, 62 248
                   L62 190
                   C62 158, 68 134, 80 118
                   C88 108, 95 100, 95 92
                   Z" fill="none" stroke="var(--stroke)" stroke-width="3" />

          <!-- Soft cover band: gently hides the outline behind the ribbon (no harsh cut) -->
          <g opacity="1">
            <!-- feathered "halo" -->
            <path d="M72 88
                     C94 78, 120 76, 150 76
                     C180 76, 206 78, 228 88
                     C238 94, 238 110, 228 116
                     C206 126, 180 128, 150 128
                     C120 128, 94 126, 72 116
                     C62 110, 62 94, 72 88 Z" fill="rgba(246,241,236,0.55)" filter="url(#softCover)" />

            <!-- main cover (matches the glass tone so it blends) -->
            <path d="M74 90
                     C96 82, 120 80, 150 80
                     C180 80, 204 82, 226 90
                     C234 94, 234 108, 226 112
                     C204 120, 180 122, 150 122
                     C120 122, 96 120, 74 112
                     C66 108, 66 94, 74 90 Z" fill="var(--glass)" opacity="0.92" />
          </g>

          <!-- Bow (in front of jar contents, but still below pulled note because note is HTML z-index 10) -->
          <g id="bow" opacity="0.99" filter="url(#bowShadow)">
            <!-- Ribbon band -->
            <path d="M78 92
                     C98 85, 122 83, 150 83
                     C178 83, 202 85, 222 92
                     C229 95, 229 104, 222 107
                     C202 114, 178 116, 150 116
                     C122 116, 98 114, 78 107
                     C71 104, 71 95, 78 92 Z" fill="url(#ribbonGrad)" />

            <!-- band highlight -->
            <path d="M90 94
                     C110 90, 128 88, 150 88
                     C172 88, 190 90, 210 94" fill="none" stroke="rgba(255,255,255,0.55)" stroke-width="3.6"
              stroke-linecap="round" opacity="0.55" />

            <!-- Left loop (more organic, folded) -->
            <path d="M124 99
                     C104 82, 78 82, 66 98
                     C56 112, 62 130, 82 131
                     C104 132, 126 118, 140 109
                     C148 103, 144 103, 124 99 Z" fill="url(#ribbonGrad)" />

            <!-- Left inner fold shadow -->
            <path d="M112 104
                     C98 96, 82 98, 76 110
                     C72 120, 78 126, 90 124" fill="none" stroke="rgba(0,0,0,0.10)" stroke-width="4"
              stroke-linecap="round" opacity="0.55" />

            <!-- Right loop -->
            <path d="M176 99
                     C196 83, 222 84, 234 100
                     C244 114, 238 132, 218 132
                     C196 132, 174 118, 160 109
                     C152 103, 156 103, 176 99 Z" fill="url(#ribbonGrad)" />

            <!-- Right inner fold shadow -->
            <path d="M188 104
                     C202 96, 218 99, 224 112
                     C228 121, 222 126, 210 124" fill="none" stroke="rgba(0,0,0,0.10)" stroke-width="4"
              stroke-linecap="round" opacity="0.48" />

            <!-- Knot -->
            <ellipse cx="150" cy="103" rx="12" ry="10" fill="var(--sageDark)" opacity="0.98" />
            <path d="M141 103 C146 96, 154 96, 159 103" fill="none" stroke="rgba(255,255,255,0.55)" stroke-width="3.2"
              stroke-linecap="round" opacity="0.55" />

            <!-- Tails -->
            <path d="M144 112
                     C140 130, 132 146, 134 165
                     C136 178, 153 166, 155 152
                     C157 140, 152 124, 151 116 Z" fill="url(#ribbonGrad)" opacity="0.96" />

            <path d="M156 112
                     C162 130, 172 148, 170 168
                     C168 181, 148 170, 146 156
                     C144 142, 150 126, 149 116 Z" fill="url(#ribbonGrad)" opacity="0.93" />

            <!-- Tail notches -->
            <path d="M140 164 L150 156 L156 166" fill="none" stroke="rgba(0,0,0,0.10)" stroke-width="3"
              stroke-linecap="round" opacity="0.35" />
            <path d="M160 166 L150 156 L146 168" fill="none" stroke="rgba(0,0,0,0.10)" stroke-width="3"
              stroke-linecap="round" opacity="0.28" />
          </g>

          <!-- Base -->
          <ellipse cx="150" cy="312" rx="84" ry="10" fill="rgba(0,0,0,0.06)" />
        </svg>
      </div>

      <div class="hint" id="hint">Tap the jar</div>

      <div class="controls">
        <button type="button" id="newBtn">New note</button>
      </div>

      <span class="sr-only" id="srStatus" aria-live="polite"></span>
    </section>
  </main>

  <script>
      const MESSAGES = [
      "You are worthy of the life you desire.",
      "One small step is still progress.",
      "You’ve made it through hard days before.",
      "Only in darkness can you see the stars.",
      "You don’t have to earn rest.",
      "You are allowed to take up space.",
      "This moment is enough.",
      "I see how bright you shine.",
      "You deserve all the good things you receive.",
      "I’m really glad you exist.",
      "I can’t see you, but I know you look great today.",

      // Gentle grounding
      "It’s okay to go slowly today.",
      "You don’t have to solve everything right now.",
      "Take a breath. Then another.",
      "You’re allowed to pause here.",
      "Nothing needs to be perfect.",
      "You can put some of it down.",
      "You’re doing enough for today.",
      "This is allowed to be easy.",
      "You don’t have to rush this.",
      "You can let today be gentle.",

      // Quiet confidence
      "You’re stronger than you feel.",
      "You know more than you think.",
      "You can trust yourself.",
      "You handle things with care.",
      "You’re learning what works for you.",
      "You adapt beautifully.",
      "You’re allowed to be proud.",
      "You don’t need permission to be yourself.",
      "You show up honestly — that matters.",
      "Your way is valid.",

      // Warm + human
      "You make things feel lighter.",
      "People feel calmer around you.",
      "You have a good heart.",
      "You bring sincerity with you.",
      "You don’t try to be someone else — and that’s rare.",
      "You notice things other people miss.",
      "You’re easy to appreciate.",
      "You’re allowed to feel good today.",
      "You don’t have to prove anything.",
      "You’re enough, even on quiet days.",

      // Soft encouragement
      "You can take this one step at a time.",
      "It’s okay if today feels tender.",
      "You’re allowed to ask for help.",
      "You’re not behind.",
      "You’re allowed to change your mind.",
      "You can begin again whenever you want.",
      "You don’t owe anyone more than honesty.",
      "You’re doing the best you can.",
      "You’re allowed to feel hopeful.",
      "You’re allowed to rest here."
    ];

    // Easter eggs (rare + personal)
    const EASTER_EGGS = [
      "Every room is brighter when you smile.",
      "Georgie thinks you’re doing great.",
      "Some people just feel like home.",
      "This note is smiling at you.",
      "You make every day brighter than the last.",
      "You’re easy to care about.",
      "I’m probably thinking of you right now.",
      "I hope something makes you smile today.",
      "Your eyes are my favorite shade of blue."
    ];
    function clean(list) {
      return list.map(s => (s ?? "").toString().trim()).filter(Boolean);
    }

    function makeBagPicker(list) {
      let bag = [];
      return function pick() {
        if (bag.length === 0) bag = [...list];
        const i = Math.floor(Math.random() * bag.length);
        return bag.splice(i, 1)[0];
      };
    }

    const CLEAN_MESSAGES = clean(MESSAGES);
    const CLEAN_EASTER = clean(EASTER_EGGS);
    const pickMessage = makeBagPicker(CLEAN_MESSAGES);
    const pickEaster = makeBagPicker(CLEAN_EASTER);

    function getRandomMessage() {
      const showEasterEgg = CLEAN_EASTER.length > 0 && Math.random() < 0.125; // ~1 in 8
      return showEasterEgg ? pickEaster() : pickMessage();
    }

    const jarArea = document.getElementById('jarArea');
    const jarSvg = document.getElementById('jarSvg');
    const lid = document.getElementById('lid');
    const note = document.getElementById('note');
    const msgEl = document.getElementById('msg');
    const hint = document.getElementById('hint');
    const btn = document.getElementById('newBtn');
    const sr = document.getElementById('srStatus');

    let busy = false;

    function restartShake() {
      jarSvg.classList.remove('shake');
      void jarSvg.getBoundingClientRect();
      jarSvg.classList.add('shake');
    }

    function play() {
      if (busy) return;
      busy = true;

      note.classList.remove('dropIn');
      note.style.opacity = 0;

      restartShake();
      lid.style.transform = 'translateY(-12px) rotate(-5deg)';

      const text = getRandomMessage();
      msgEl.textContent = text;
      sr.textContent = text;

      hint.textContent = "…";

      setTimeout(() => {
        note.classList.add('dropIn');
      }, 260);

      setTimeout(() => {
        lid.style.transform = 'translateY(0px) rotate(0deg)';
        hint.textContent = "Tap again or press “New note”";
        busy = false;
      }, 900);
    }

    jarArea.addEventListener('click', play);
    jarArea.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); play(); }
    });
    btn.addEventListener('click', play);
  </script>
</body>

</html>
